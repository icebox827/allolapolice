function dtWidgetSwitcherListShowHide(a){if(1==a.length){var b=a.parents(".dt-widget-switcher").next("div.hide-if-js");"all"==a.val()?b.hide():b.show()}}function dtAddSortable(a){1==a.length&&(a.sortable({cursor:"move",placeholder:"dt-widget-sortable-placegolder"}),a.parents(".dt-widget-sortable-container").on("click","a.dt-widget-sortable-remove",function(){jQuery(this).parents("li.ui-state-default").detach()}),a.parents(".dt-widget-sortable-container").on("click","a.dt-widget-sortable-add",function(){var a=jQuery(this),b=jQuery(this).siblings(".dt-widget-sortable"),c=jQuery(this).attr("data-fields-name")||"",d=a.parents(".dt-widget-sortable-container").find("li"),e=-1,f=a.attr("data-field-type"),g="";if(!c||!f)return!1;d.each(function(){var a=parseInt(jQuery(this).attr("data-index"));a>e&&(e=a)}),e++;var h={nextIndex:e,fieldsName:c};switch(f){case"contact-info":g=dtGetContactInfoField(jQuery.extend(h,{title:dtWidgtes.title,content:dtWidgtes.content}));break;case"accordion":g=dtGetContactInfoField(jQuery.extend(h,{title:dtWidgtes.title,content:dtWidgtes.content}));break;case"progress-bar":g=dtGetProgressBarField(jQuery.extend(h,{title:dtWidgtes.title,percent:dtWidgtes.percent,showPercent:dtWidgtes.showPercent}))}b.append(g),"progress-bar"==f&&dtAddColorpicker(b.find(".dt-widget-colorpicker").not(".wp-color-picker"))}))}function dtGetContactInfoField(a){var b=wp.media.template("dt-widget-contact-info-field");return b(a)}function dtGetProgressBarField(a){var b=wp.media.template("dt-widget-progress-bars-field");return b(a)}function dtAddColorpicker(a){a.length<1||a.wpColorPicker({palettes:!1})}function the7ContactFormWidgetCheckTerms(a){var b=jQuery(a).parent().next(".the7-contact-form-widget-terms-msg-block");a.checked?b.show():b.hide()}jQuery(function(a){a(".dt-widget-switcher input").live("click",function(){a(this).attr("name").search("__i__")==-1&&dtWidgetSwitcherListShowHide(a(this))}),a(".dt-widget-switcher input:checked").each(function(){dtWidgetSwitcherListShowHide(a(this))}),a(".dt-widget-sortable").each(function(){dtAddSortable(a(this))}),a(".dt-widget-colorpicker").each(function(){dtAddColorpicker(a(this))}),a(".the7-toggle-wa-manager").on("click",function(b){b.preventDefault(),a("#optionsframework").slideToggle(400,"linear")}).detach().insertAfter(a(".page-title-action").last()).removeClass("hidden")}),jQuery(document).ajaxSuccess(function(a,b,c){if("undefined"!=typeof c.data&&"function"==typeof c.data.search&&c.data.search("action=save-widget")!=-1){for(var d=c.data.split("&"),e="",f="",g=d.length-1;g>=0&&(!e||!f);g--)d[g].search("sidebar=")!=-1?e="#"+d[g].split("=")[1]+" ":d[g].search("widget-id=")!=-1&&(f='div.widget[id$="'+d[g].split("=")[1]+'"] ');dtWidgetSwitcherListShowHide(jQuery(e+f+".dt-widget-switcher input:checked")),dtAddSortable(jQuery(e+f+".dt-widget-sortable")),dtAddColorpicker(jQuery(e+f+".dt-widget-colorpicker"))}});