jQuery(document).ready(function(a){function b(a){a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()}function c(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}a.fn.exists=function(){return a(this).length>0},a.fn.loaded=function(b,c,d){var e=this.length;return e>0?this.each(function(){var d=this,f=a(d);f.on("load.dt",function(d){a(this).off("load.dt"),"function"==typeof b&&b.call(this),--e<=0&&"function"==typeof c&&c.call(this)}),d.complete&&void 0!==d.complete?f.trigger("load.dt"):d.src=d.src}):d?("function"==typeof c&&c.call(this),this):void 0};var d=a("body"),e=a(window),f=a("#main-slideshow");a(".three-d-slider"),a("#wpadminbar").height(),a(".masthead:not(.side-header):not(.side-header-v-stroke)").height();if(d.hasClass("transparent"));else if(d.hasClass("overlap")){a(".masthead:not(.side-header):not(.side-header-v-stroke)").height()+(parseInt(f.css("marginTop"))+parseInt(f.css("marginBottom")))}else{a(".masthead:not(.side-header):not(.side-header-v-stroke)").height()}a.HoverDir=function(b,c){this.$el=a(c),this._init(b)},a.HoverDir.defaults={speed:300,easing:"ease",hoverDelay:0,inverse:!1},a.HoverDir.prototype={_init:function(b){this.options=a.extend(!0,{},a.HoverDir.defaults,b),this.transitionProp="all "+this.options.speed+"ms "+this.options.easing,this.support=Modernizr.csstransitions,this._loadEvents()},_loadEvents:function(){var b=this;this.$el.on("mouseenter.hoverdir, mouseleave.hoverdir",function(c){var d=a(this),e=d.find(".rollover-content"),f=b._getDir(d,{x:c.pageX,y:c.pageY}),g=b._getStyle(f);"mouseenter"===c.type?(e.hide().css(g.from),clearTimeout(b.tmhover),b.tmhover=setTimeout(function(){e.show(0,function(){var c=a(this);b.support&&c.css("transition",b.transitionProp),b._applyAnimation(c,g.to,b.options.speed)})},b.options.hoverDelay)):(b.support&&e.css("transition",b.transitionProp),clearTimeout(b.tmhover),b._applyAnimation(e,g.from,b.options.speed))})},_getDir:function(a,b){var c=a.width(),d=a.height(),e=(b.x-a.offset().left-c/2)*(c>d?d/c:1),f=(b.y-a.offset().top-d/2)*(d>c?c/d:1),g=Math.round((Math.atan2(f,e)*(180/Math.PI)+180)/90+3)%4;return g},_getStyle:function(a){var b,c,d={left:"0px",top:"-100%"},e={left:"0px",top:"100%"},f={left:"-100%",top:"0px"},g={left:"100%",top:"0px"},h={top:"0px"},i={left:"0px"};switch(a){case 0:b=this.options.inverse?e:d,c=h;break;case 1:b=this.options.inverse?f:g,c=i;break;case 2:b=this.options.inverse?d:e,c=h;break;case 3:b=this.options.inverse?g:f,c=i}return{from:b,to:c}},_applyAnimation:function(b,c,d){a.fn.applyStyle=this.support?a.fn.css:a.fn.animate,b.stop().applyStyle(c,a.extend(!0,[],{duration:d+"ms"}))}};var g=function(a){window.console&&window.console.error(a)};a.fn.hoverdir=function(b){var c=a.data(this,"hoverdir");if("string"==typeof b){var d=Array.prototype.slice.call(arguments,1);this.each(function(){return c?a.isFunction(c[b])&&"_"!==b.charAt(0)?void c[b].apply(c,d):void g("no such method '"+b+"' for hoverdir instance"):void g("cannot call methods on hoverdir prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){c?c._init():c=a.data(this,"hoverdir",new a.HoverDir(b,this))});return c},a(".mobile-false .hover-grid .rollover-project").each(function(){a(this).hoverdir()}),a(".mobile-false .hover-grid-reverse .rollover-project ").each(function(){a(this).hoverdir({inverse:!0})}),a.fn.hoverLinks=function(){if(a(".semitransparent-portfolio-icons").length>0||a(".accent-portfolio-icons").length>0)return this.each(function(){var b=a(this);b.hasClass("height-ready")||(a("<span/>").appendTo(a(this)),b.on({mouseenter:function(){if(0===a(this).children("span").length){var b=a("<span/>").appendTo(a(this));setTimeout(function(){b.addClass("icon-hover")},20)}else a(this).children("span").addClass("icon-hover")},mouseleave:function(){a(this).children("span").removeClass("icon-hover")}}),b.addClass("height-ready"))})},a(".links-container a").hoverLinks(),a.fn.forwardToPost=function(){return this.each(function(){var b=a(this);b.hasClass("this-ready")||(b.on("click",function(){if(!b.parents(".ts-wrap").hasClass("ts-interceptClicks"))return window.location.href=b.find("a").first().attr("href"),!1}),b.addClass("this-ready"))})},a(".mobile-false .rollover-project.forward-post").forwardToPost(),a.fn.touchforwardToPost=function(){return this.each(function(){var b=a(this);if(!b.hasClass("touch-hover-ready")){d.on("touchend",function(b){a(".mobile-true .rollover-content").removeClass("is-clicked"),a(".mobile-true .rollover-project").removeClass("is-clicked")});var b=a(this).find(".rollover-content");b.on("touchstart",function(a){origY=a.originalEvent.touches[0].pageY,origX=a.originalEvent.touches[0].pageX}),b.on("touchend",function(c){var d=c.originalEvent.changedTouches[0].pageX,e=c.originalEvent.changedTouches[0].pageY;if(origY==e||origX==d){if(!b.hasClass("is-clicked"))return c.preventDefault(),a(".mobile-ture .rollover-content").removeClass("is-clicked"),a(".mobile-true .rollover-project").removeClass("is-clicked"),b.addClass("is-clicked"),b.parent(".rollover-project").addClass("is-clicked"),!1;window.location.href=b.prev("a").first().attr("href")}}),b.addClass("touch-hover-ready")}})},a(".mobile-true .rollover-project.forward-post").touchforwardToPost(),a.fn.followCurentLink=function(){return this.each(function(){var b=a(this);if(!b.hasClass("this-ready")){var c=b.find(".links-container > a"),d=b.find(".portfolio-categories a"),e=!1;b.on("click",function(){if(!b.parents(".ts-wrap").hasClass("ts-interceptClicks"))return c.each(function(){$thisTarget=a(this).attr("target")?a(this).attr("target"):"_self"}),c.hasClass("project-details")||c.hasClass("link")||c.hasClass("project-link")?(window.open(c.attr("href"),$thisTarget),!1):(e||(e=!0,c.trigger("click"),e=!1),!1)}),b.find(d).click(function(a){a.stopPropagation(),window.location.href=d.attr("href")}),b.addClass("this-ready")}})},a(".mobile-false .rollover-project.rollover-active, .mobile-false .buttons-on-img.rollover-active").followCurentLink(),a.fn.touchHoverImage=function(){return this.each(function(){var b=a(this);if(!b.hasClass("hover-ready")){d.on("touchend",function(b){a(".mobile-true .rollover-content").removeClass("is-clicked")});var c=a(this).find(".rollover-content");c.parents(".wf-cell");c.on("touchstart",function(a){origY=a.originalEvent.touches[0].pageY,origX=a.originalEvent.touches[0].pageX}),c.on("touchend",function(b){var d=b.originalEvent.changedTouches[0].pageX,e=b.originalEvent.changedTouches[0].pageY;if((origY==e||origX==d)&&!c.hasClass("is-clicked"))return a(".links-container > a",c).on("touchend",function(a){a.stopPropagation(),c.addClass("is-clicked")}),b.preventDefault(),a(".mobile-true .buttons-on-img .rollover-content").removeClass("is-clicked"),c.addClass("is-clicked"),!1}),b.addClass("hover-ready")}})},a(".mobile-true .buttons-on-img").touchHoverImage(),a.fn.touchScrollerImage=function(){return this.each(function(){var b=a(this);if(!b.hasClass("hover-ready")){d.on("touchend",function(b){a(".mobile-true .project-list-media").removeClass("is-clicked")});var c=a(this),e=c.find("a.rollover-click-target").first(),f=c.find(".links-container");c.on("touchstart",function(a){origY=a.originalEvent.touches[0].pageY,origX=a.originalEvent.touches[0].pageX}),c.on("touchend",function(b){var d=b.originalEvent.changedTouches[0].pageX,g=b.originalEvent.changedTouches[0].pageY;if(!c.parents(".ts-wrap").hasClass("ts-interceptClicks"))return origY!=g&&origX!=d||c.hasClass("is-clicked")?void 0:(e.length>0&&(e.on("click",function(b){b.stopPropagation(),a(this).hasClass("go-to")&&(window.location.href=a(this).attr("href"))}),e.trigger("click")),f.length>0&&f.find(" > a ").each(function(){a(this).on("touchend",function(b){b.stopPropagation(),a(this).trigger("click")})}),b.preventDefault(),a(".mobile-true .fs-entry").removeClass("is-clicked"),c.addClass("is-clicked"),!1)}),b.addClass("hover-ready")}})},a(".mobile-true .project-list-media").touchScrollerImage(),a.fn.touchHoverLinks=function(){return this.each(function(){var b=a(this);if(!b.hasClass("hover-ready")){var c=a(this);c.on("touchend",function(b){if(!c.parents(".ts-wrap").hasClass("ts-interceptClicks"))return c.hasClass("is-clicked")?void 0:c.hasClass("project-zoom")?(c.trigger("click"),a(".mobile-true .links-container > a").removeClass("is-clicked"),c.addClass("is-clicked"),!1):(window.location.href=c.attr("href"),!1)}),b.addClass("hover-ready")}})},a(".mobile-true .fs-entry .links-container > a").touchHoverLinks(),a.fn.triggerAlbumsClick=function(){return this.each(function(){var b=a(this);if(!b.hasClass("this-ready")){var c=b.find("a.rollover-click-target, a.dt-pswp-item").first(),d=b.find(".portfolio-categories a");if(c.length>0){c.on("click",function(b){b.preventDefault(),c.parents(".ts-wrap").hasClass("ts-interceptClicks")||a(this).hasClass("go-to")&&(window.location.href=a(this).attr("href"))});var e=!1;b.on("click",function(){if(!b.parents(".ts-wrap").hasClass("ts-interceptClicks"))return e||(e=!0,c.trigger("click"),e=!1),!1}),b.find(d).click(function(a){a.stopPropagation(),window.location.href=d.attr("href")})}b.addClass("this-ready")}})},a(".mobile-false .dt-albums-template .rollover-project, .mobile-false .dt-albums-shortcode .rollover-project, .mobile-false .dt-albums-template .buttons-on-img, .mobile-false .dt-albums-shortcode .buttons-on-img, .mobile-false .archive .type-dt_gallery .buttons-on-img").triggerAlbumsClick(),a.fn.triggerAlbumsTouch=function(){return this.each(function(){var b=a(this);if(!b.hasClass("this-touch-ready")){var c=b.find("a.rollover-click-target").first(),e=b.find(".portfolio-categories a");if(d.on("touchend",function(b){a(".mobile-true .rollover-content").removeClass("is-clicked")}),c.length>0){c.on("click",function(b){b.preventDefault(),b.stopPropagation(),c.parents(".ts-wrap").hasClass("ts-interceptClicks")||a(this).hasClass("go-to")&&(window.location.href=a(this).attr("href"))});var f=!1;b.on("touchstart",function(a){origY=a.originalEvent.touches[0].pageY,origX=a.originalEvent.touches[0].pageX}),b.on("touchend",function(a){var d=a.originalEvent.changedTouches[0].pageX,e=a.originalEvent.changedTouches[0].pageY;if(origY==e||origX==d){if(b.parents(".ts-wrap").hasClass("ts-interceptClicks"))return;return f||(f=!0,c.trigger("click"),f=!1),!1}}),b.find(e).click(function(a){a.stopPropagation(),window.location.href=e.attr("href")})}b.addClass("this-touch-ready")}})},a(".mobile-true .dt-albums-template .rollover-project, .mobile-true .dt-albums-shortcode .rollover-project, .mobile-true .dt-albums-template .buttons-on-img, .mobile-true .dt-albums-shortcode .buttons-on-img, .mobile-true .archive .type-dt_gallery .buttons-on-img").triggerAlbumsTouch(),a.fn.triggerHoverClick=function(){return this.each(function(){var b=a(this);if(!b.hasClass("click-ready")){var c,d=b.prev("a:not(.dt-single-pswp):not(.dt-pswp-item)").first(),e=b.find(".portfolio-categories a"),f=b.find(".project-link"),g=f.attr("target")?f.attr("target"):"_self";if(d.length>0){var h=!1;b.on("click",function(e){if(!b.parents(".ts-wrap").hasClass("ts-interceptClicks"))return c=a(".semitransparent-portfolio-icons").length>0||a(".accent-portfolio-icons").length>0?a(e.target).parent():a(e.target),c.hasClass("project-zoom")||h||(h=!0,d.trigger("click"),window.location.href=d.attr("href"),h=!1),!1}),b.find(f).click(function(a){a.stopPropagation(),a.preventDefault(),window.open(f.attr("href"),g)}),b.find(e).click(function(a){a.stopPropagation(),window.location.href=e.attr("href")})}b.addClass("click-ready")}})},a(".mobile-false .rollover-project:not(.rollover-active) .rollover-content, .mobile-false .buttons-on-img:not(.rollover-active) .rollover-content").triggerHoverClick();var h=a(".photo-scroller");if(h.length>0&&(a.fn.photoSlider=function(){function b(a){"37"==a.keyCode?C.noSlide||C.slidePrev():"39"==a.keyCode&&(C.noSlide||C.slideNext())}var c=a(this),f={},g="";$elParent=c.parents(".photo-scroller"),f.$items=c.children("figure"),f.count=f.$items.length,f.$items.each(function(b){var c=a(this),d=c.children().first().remove(),e=d.attr("href"),f=d.children("img"),h=f.attr("src"),i=f.attr("data-src"),j=(f.attr("data-srcset"),f.attr("class"));if(f.hasClass("lazy-load"))var k="layzr-bg";else var k="";c.find("figcaption").addClass("caption-"+(b+1));var l=a(this).find("figcaption").clone(!0);if(a(".slide-caption").append(l),parseInt($elParent.attr("data-thumb-width"))>0){var m=parseInt($elParent.attr("data-thumb-width")),n=parseInt($elParent.attr("data-thumb-height"));$elParent.removeClass("proportional-thumbs")}else{var m=parseInt(f.attr("width")),n=parseInt(f.attr("height"));$elParent.addClass("proportional-thumbs")}g=g+'<div class="ts-cell" data-width="'+(m+5)+'" data-height="'+(n+10)+'"><div class="ts-thumb-img '+k+'"><img class=" '+j+'" src="'+h+'" data-src="'+i+'" data-srcset="'+i+'" width="'+m+'" height="'+n+'"></div></div>',c.prepend('<div class="ts-slide-img"><img src="'+e+'" width="'+c.attr("data-width")+'" height="'+c.attr("data-height")+'"></div>')}),$elParent.append('<div class="scroller-arrow prev"><i></i><i></i></div><div class="scroller-arrow next"><i></i><i></i></div>'),c.addClass("ts-cont"),c.wrap('<div class="ts-wrap"><div class="ts-viewport"></div></div>');var h=c.parents(".ts-wrap"),j=e.width(),k=$elParent,l="true"==k.attr("data-autoslide"),m=k.attr("data-delay")&&parseInt(k.attr("data-delay"))>999?parseInt(k.attr("data-delay")):5e3,n="true"===k.attr("data-loop"),o=k.attr("data-thumb-height")?parseInt(k.attr("data-thumb-height"))+10:90,p=k.attr("data-transparency")?k.attr("data-transparency"):.5,q=(a("#wpadminbar").length>0?a("#wpadminbar").height():0,k.attr("data-ls-min")?parseInt(k.attr("data-ls-min")):0),r=k.attr("data-ls-max")?parseInt(k.attr("data-ls-max")):100,s=k.attr("data-ls-fill-dt")?k.attr("data-ls-fill-dt"):"fill",t=k.attr("data-ls-fill-mob")?k.attr("data-ls-fill-mob"):"fit",u=k.attr("data-pt-min")?parseInt(k.attr("data-pt-min")):0,v=k.attr("data-pt-max")?parseInt(k.attr("data-pt-max")):100,w=k.attr("data-pt-fill-dt")?k.attr("data-pt-fill-dt"):"fill",x=k.attr("data-pt-fill-mob")?k.attr("data-pt-fill-mob"):"fit",y=k.attr("data-padding-side")?parseInt(k.attr("data-padding-side")):0;r<=0&&(r=100),v<=0&&(v=100),r<r&&(r=r),v<v&&(v=v),h.addClass("ts-ls-"+s).addClass("ts-ls-mob-"+t),h.addClass("ts-pt-"+w).addClass("ts-pt-mob-"+x),h.find(".ts-slide-img").css({opacity:p}),h.find(".video-icon").css({opacity:p});var z=k.attr("data-padding-top")&&j>760?k.attr("data-padding-top"):0,A=k.attr("data-padding-bottom")&&j>760?k.attr("data-padding-bottom"):0,B=h.find(".ts-viewport");B.css({"margin-top":z+"px","margin-bottom":A+"px"}),e.on("debouncedresize",function(){z=k.attr("data-padding-top")&&e.width()>760?k.attr("data-padding-top"):0,A=k.attr("data-padding-bottom")&&e.width()>760?k.attr("data-padding-bottom"):0,e.width()>760?B.css({"margin-top":z+"px","margin-bottom":A+"px"}):B.css({"margin-top":"0px","margin-bottom":"0px"})});var C=h.thePhotoSlider({mode:{type:"centered",lsMinW:q,lsMaxW:r,ptMinW:u,ptMaxW:v},height:function(){var b=e.height(),c=a("#wpadminbar").height();if(a(".mixed-header").length>0)var f=a(".mixed-header").height();else var f=a(".masthead").height();return d.hasClass("transparent")||h.parents(".photo-scroller").hasClass("full-screen")?window.innerWidth<dtLocal.themeSettings.mobileHeader.secondSwitchPoint?b-z-A-f-c:b-z-A-c:a(".mixed-header").length>0||h.parents(".photo-scroller").hasClass("full-screen")?window.innerWidth<dtLocal.themeSettings.mobileHeader.firstSwitchPoint?b-z-A-f-c:a(".side-header-h-stroke").length>0?b-z-A-f-c:b-z-A-c:a(".side-header").length>0||h.parents(".photo-scroller").hasClass("full-screen")?window.innerWidth<dtLocal.themeSettings.mobileHeader.firstSwitchPoint?b-z-A-f-c:b-z-A-c:window.innerWidth<dtLocal.themeSettings.mobileHeader.firstSwitchPoint?b-z-A-f-c:b-z-A-f-c},sidePaddings:y,autoPlay:{enabled:l,delay:m,loop:n}}).data("thePhotoSlider"),D=a('<div class="ts-wrap"><div class="ts-viewport"><div class="ts-cont ts-thumbs">'+g+"</div></div></div>");h.after(D);var E=D.thePhotoSlider({mode:{type:"scroller"},height:o}).data("thePhotoSlider");a(".prev",F).click(function(){C.noSlide||C.slidePrev()}),a(".next",F).click(function(){C.noSlide||C.slideNext()}),C.ev.on("updateNav sliderReady",function(){C.lockRight?a(".next",$elParent).addClass("disabled"):a(".next",$elParent).removeClass("disabled"),C.lockLeft?a(".prev",$elParent).addClass("disabled"):a(".prev",$elParent).removeClass("disabled")}),window.addEventListener("keydown",b,!1),C.ev.on("sliderReady beforeTransition",function(){C.slides.$items.removeClass("act"),C.slides.$items.eq(C.currSlide).addClass("act"),E.slides.$items.removeClass("act"),E.slides.$items.eq(C.currSlide).addClass("act"),C.slides.$items.eq(C.currSlide).hasClass("ts-video")?C.slides.$items.parents(".ts-wrap ").addClass("hide-slider-overlay"):C.slides.$items.eq(C.currSlide).find(".ps-link").length>0?C.slides.$items.parents(".ts-wrap ").addClass("hide-slider-overlay"):C.slides.$items.parents(".ts-wrap ").removeClass("hide-slider-overlay");var b=C.slides.$items.eq(C.currSlide).find("figcaption").attr("class");a(".slide-caption > figcaption").removeClass("actCaption"),a(".slide-caption > ."+b).addClass("actCaption")}),C.ev.on("afterTransition",function(){var a=-E._unifiedX(),b=a+E.wrap.width,c=-E.slides.position[C.currSlide],d=c+E.slides.width[C.currSlide];if(c-=50,d+=50,c<a)for(i=E.currSlide;i>=0;i--){c+=50,d-=50;var e=-E.slides.position[i],f=e+E.wrap.width;if(d>f){E.slideTo(i+1);break}0===i&&E.slideTo(0)}else d>b&&E.slideTo(C.currSlide)}),D.addClass("scroller-thumbnails"),E.slides.$items.each(function(b){a(this).on("click",function(c){var d=a(this);d.parents(".ts-wrap").hasClass("ts-interceptClicks")||C.slideTo(b)})}),a(".scroller-thumbnails").layzrInitialisation(),C.slides.$items.each(function(b){a(this).on("click",function(c){var d=a(this);d.parents(".ts-wrap").hasClass("ts-interceptClicks")||C.slideTo(b)})});var F=h.parents(".photo-scroller");C.st.autoPlay.enabled&&a(".auto-play-btn",F).addClass("paused"),a(".auto-play-btn",F).on("click",function(b){b.preventDefault();var c=a(this);c.hasClass("paused")?(c.removeClass("paused"),C.noSlide||C.pause(),C.st.autoPlay.enabled=!1):(c.addClass("paused"),C.noSlide||C.play(),C.st.autoPlay.enabled=!0)})},a(".photoSlider").photoSlider(),a(".photoSlider").parents(".photo-scroller").css("visibility","visible"),dtGlobals.isWindowsPhone||(a(".full-screen-btn").each(function(){var b=a(this),c=b.parents(".photo-scroller");document.addEventListener("fullscreenchange",function(){document.fullscreen||(b.removeClass("act"),c.removeClass("full-screen"),a("body, html").css("overflow",""))},!1),document.addEventListener("mozfullscreenchange",function(){document.mozFullScreen||(b.removeClass("act"),c.removeClass("full-screen"),a("body, html").css("overflow",""))},!1),document.addEventListener("webkitfullscreenchange",function(){if(!document.webkitIsFullScreen){b.removeClass("act"),c.removeClass("full-screen"),a("body, html").css("overflow","");var d=$frame.data("thePhotoSlider");"undefined"!=typeof d&&d.update()}},!1)}),a(".full-screen-btn").on("click",function(d){d.preventDefault();var e=a(this),f=e.parents(".photo-scroller"),g=f.find(".ts-wrap");f.find(".scroller-thumbnails").data("thePhotoSlider"),g.data("thePhotoSlider");e.parents(".photo-scroller").find("figure").animate({opacity:0},150),e.hasClass("act")?(e.removeClass("act"),c(),f.removeClass("full-screen"),setTimeout(function(){e.parents(".photo-scroller").find("figure").delay(600).animate({opacity:1},300)},300)):(e.addClass("act"),f.addClass("full-screen"),b(document.documentElement),a("body, html").css("overflow","hidden"),setTimeout(function(){e.parents(".photo-scroller").find("figure").delay(600).animate({opacity:1},300)},300));var h=g.data("thePhotoSlider");"undefined"!=typeof h&&h.update()})),h.each(function(){var b=a(this);a(".btn-cntr, .slide-caption",b).css({bottom:parseInt(b.attr("data-thumb-height"))+15}),b.hasClass("hide-thumbs")&&(b.find(".hide-thumb-btn").addClass("act"),a(".scroller-thumbnails",b).css({bottom:-(parseInt(b.attr("data-thumb-height"))+20)}),a(".btn-cntr, .slide-caption",b).css({bottom:"5px"}))}),a(".hide-thumb-btn").on("click",function(b){b.preventDefault();var c=a(this),d=c.parents(".photo-scroller");c.hasClass("act")?(c.removeClass("act"),d.removeClass("hide-thumbs"),a(".scroller-thumbnails",d).css({bottom:0}),a(".btn-cntr, .slide-caption",d).css({bottom:parseInt(d.attr("data-thumb-height"))+15})):(c.addClass("act"),d.addClass("hide-thumbs"),a(".scroller-thumbnails",d).css({bottom:-(parseInt(d.attr("data-thumb-height"))+20)}),a(".btn-cntr, .slide-caption",d).css({bottom:"5px"}))})),a(".rsHomePorthole").exists()){var j={};j.container=a("#main-slideshow"),j.hendheld=!!(e.width()<740&&dtGlobals.isMobile),a("#main-slideshow-content").appendTo(j.container),a.fn.portholeScroller=function(){var b=a(this),c={},d="";c.$items=b.children("li"),c.count=c.$items.length,c.$items.each(function(b){var c=a(this),e=c,f=e.children("img"),g=f.attr("data-rstmb"),h=(f.attr("data-src"),f.attr("data-srcset"),f.attr("class"));if(f.hasClass("lazy-load"))var i="layzr-bg";else var i="";d=d+'<div class="ps-thumb-img '+i+'"><img class=" '+h+'" src="'+g+'"  width="150" height="150"></div>'}),b.addClass("ts-cont"),b.wrap('<div class="ts-wrap"><div class="ts-viewport portholeSlider-wrap"></div></div>');var f=b.parents(".ts-wrap"),g=b.parents("#main-slideshow"),h=(e.width(),g.attr("data-padding-side")?parseInt(g.attr("data-padding-side")):0,!("true"==g.attr("data-paused")||"undefined"==typeof g.attr("data-autoslide")||e.width()<740&&dtGlobals.isMobile)),i=g.attr("data-autoslide")&&parseInt(g.attr("data-autoslide"))>999?parseInt(g.attr("data-autoslide")):5e3,j="undefined"!=typeof g.attr("data-autoslide"),k=g.attr("data-width")?parseInt(g.attr("data-width")):800,l=g.attr("data-height")?parseInt(g.attr("data-height")):400,m=g.attr("data-scale")?g.attr("data-scale"):"none",n=f.thePhotoSlider({mode:{type:"slider"},height:l,width:k,resizeImg:!0,imageScaleMode:m,imageAlignCenter:!0,autoPlay:{enabled:h,delay:i,loop:j}}).data("thePhotoSlider"),o=a('<div class="psThumbs"><div class="psThumbsContainer">'+d+"</div></div>");f.append(o);var p=a(".ps-thumb-img ");p.each(function(b){a(this).on("click",function(c){a(this);n.slideTo(b)})}),a(".psThumbsContainer").after('<div class="progress-wrapper"><div class="progress-controls"></div></div>'),$progressWrap=a(".psThumbsContainer").next(),$progressHtml='<div class="progress-mask"><div class="progress-spinner-left" style="animation-duration: '+i+'ms;"></div></div><div class="progress-mask"><div class="progress-spinner-right" style="animation-duration: '+i+'ms;"></div></div>',n.st.autoPlay.enabled&&$progressWrap.find(".progress-mask").length<1&&$progressWrap.prepend($progressHtml),n.ev.on("autoPlayPlay",function(){$progressWrap.find(".progress-mask").length<1&&$progressWrap.prepend($progressHtml),$progressWrap.removeClass("paused")}),n.ev.on("autoPlayPause",function(){$progressWrap.find(".progress-mask").remove(),h||$progressWrap.addClass("paused")}),n.ev.on("sliderReady beforeTransition",function(){var b=40*-n.currSlide;0==b&&(b=20),p.removeClass("psNavSelected psNavPrev psNavNext psNavVis"),p.eq(n.currSlide).addClass("psNavSelected"),p.eq(n.currSlide).prev().addClass("psNavPrev"),p.eq(n.currSlide).next().addClass("psNavNext"),p.eq(n.currSlide).prev().prev().addClass("psNavVis"),p.eq(n.currSlide).next().next().addClass("psNavVis"),a(".psThumbsContainer").css({transform:"translateY("+b+"px)"})}),n.ev.on("sliderReady beforeTransition",function(){$progressWrap.addClass("blurred")}),n.ev.on("sliderReady afterTransition",function(){$progressWrap.removeClass("blurred")});var q;e.on("resize",function(){clearTimeout(q),q=setTimeout(function(){$progressWrap.removeClass("blurred")},200)}),a('<div class="leftArrow"></div><div class="rightArrow"></div>').insertAfter(b),a(".leftArrow",f).click(function(){n.noSlide||n.slidePrev()}),a(".rightArrow",f).click(function(){n.noSlide||n.slideNext()}),n.ev.on("updateNav sliderReady",function(){n.lockRight?a(".rightArrow",f).addClass("disabled"):a(".rightArrow",f).removeClass("disabled"),n.lockLeft?a(".leftArrow",f).addClass("disabled"):a(".leftArrow",f).removeClass("disabled"),n.lockRight&&n.lockLeft&&g.addClass("hide-arrows")}),"true"===g.attr("data-paused")&&$progressWrap.addClass("paused"),$progressWrap.on("click",function(b){b.preventDefault();var c=a(this);c.hasClass("paused")?(c.removeClass("paused"),$progressWrap.find(".progress-mask").length<1&&$progressWrap.prepend($progressHtml),n.noSlide||n.play(),n.st.autoPlay.enabled=!0):(c.addClass("paused"),n.noSlide||n.pause(),n.st.autoPlay.enabled=!1,$progressWrap.find(".progress-mask").remove())})},a(".rsHomePorthole").each(function(){a(this).portholeScroller()}),a(".ts-wrap .dt-pswp-item").each(function(){var b=a(this);b.parents().removeClass("photoswipe-wrapper").parents("li").addClass("photoswipe-wrapper")})}}),function(a){a.fn.collagePlus=function(b){function c(b,c,e,f){for(var g=e.padding*b.length+b.length*b[0][3],h=e.albumWidth-g,i=h/(c-g),j=g,k=c<e.albumWidth,l=0;l<b.length;l++){var m=a(b[l][0]),n=Math.floor(b[l][1]*i),o=Math.floor(b[l][2]*i),p=!!(l<b.length-1);e.allowPartialLastRow===!0&&k===!0&&(n=b[l][1],o=b[l][2]),j+=n;var q=m.is("img")?m:m.find("img").not(".blur-effect").first();q.width(n),m.is("img")||m.width(n+b[l][3]),q.height(o),m.is("img")||m.height(o+b[l][4]),e.allowPartialLastRow===!1&&k===!0?d(m,p,"none"):d(m,p,e.display)}}function d(a,b,c){var d={display:c,"vertical-align":"bottom",overflow:"hidden"};return a.css(d)}function e(b){$img=a(b);var c=new Array;return c.w=parseFloat($img.css("border-left-width"))+parseFloat($img.css("border-right-width")),c.h=parseFloat($img.css("border-top-width"))+parseFloat($img.css("border-bottom-width")),c}var f={targetHeight:400,albumWidth:this.width(),padding:parseFloat(this.css("padding-left")),images:this.children(),fadeSpeed:"fast",display:"inline-block",effect:"default",direction:"vertical",allowPartialLastRow:!1},g=a.extend({},f,b);return this.each(function(){var b=0,d=[],f=1;g.images.each(function(h){var i=a(this),j=i.is("img")?i:a(this).find("img").not(".blur-effect").first();if("undefined"!=j.attr("width")&&"undefined"!=j.attr("height"))var k="undefined"!=typeof j.data("width")?j.data("width"):j.attr("width"),l="undefined"!=typeof j.data("height")?j.data("height"):j.attr("height");else var k="undefined"!=typeof j.data("width")?j.data("width"):j.width(),l="undefined"!=typeof j.data("height")?j.data("height"):j.height();var m=e(j);j.data("width",k),j.data("height",l);var n=Math.ceil(k/l*g.targetHeight),o=Math.ceil(g.targetHeight);d.push([this,n,o,m.w,m.h]),b+=n+m.w+g.padding,b>g.albumWidth&&0!=d.length&&(c(d,b,g,f),delete b,delete d,b=0,d=[],f+=1),g.images.length-1==h&&0!=d.length&&(c(d,b,g,f),delete b,delete d,b=0,d=[],f+=1)}),a(this).trigger("jgDone")})};var b=0;a(".jg-container").each(function(){b++;var c=a(this),d=c.attr("data-padding");c.find(".wf-cell");c.attr("id","jg-container-"+b),a("<style type='text/css'> .content #jg-container-"+b+" .wf-cell{padding:"+d+";} .content #jg-container-"+b+".wf-container{margin:-"+d+";} .content .full-width-wrap #jg-container-"+b+".wf-container{margin-left:"+d+"; margin-right:"+d+"; margin-top:-"+d+"; margin-bottom:-"+d+";}</style>").insertAfter(c),c.on("jgDone",function(){new Layzr({selector:".jgrid-lazy-load",attr:"data-src",attrSrcSet:"data-srcset",retinaAttr:"data-src-retina",threshold:0,before:function(){this.setAttribute("sizes",this.width+"px"),this.style.willChange="opacity"},callback:function(){this.classList.add("jgrid-layzr-loaded");var b=a(this);b.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(a){setTimeout(function(){b.parent().removeClass("layzr-bg"),b.css("will-change","auto")},200)})}})})}),a.fn.collage=function(b){return this.each(function(){var c=(a(this),a(this)),d=c.attr("data-padding"),e=c.find(".wf-cell"),f=parseFloat(e.first().css("padding-left"))+parseFloat(e.first().css("padding-right")),g=parseInt(c.attr("data-target-height")),h=!0;if("false"==c.attr("data-part-row")&&(h=!1),c.parent(".full-width-wrap").length)var i=c.parents(".full-width-wrap").width()-2*parseInt(d);else var i=c.parent().width()+2*parseInt(d);var j={albumWidth:i,targetHeight:g,padding:f,allowPartialLastRow:h,fadeSpeed:2e3,effect:"effect-1",direction:"vertical"};a.extend(j,b),dtGlobals.jGrid=j,c.collagePlus(j),c.css({width:i})})},a(window).on("debouncedresize",function(){a(".jg-container").not(".jgrid-shortcode").collage(),a(".jgrid-shortcode").each(function(){var b=a(this),c=b.data("visibleItems");c?b.collage({images:c}):b.collage()})}).trigger("debouncedresize")}(jQuery);